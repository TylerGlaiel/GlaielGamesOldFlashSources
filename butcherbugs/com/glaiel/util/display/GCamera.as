//COPYRIGHT TYLER GLAIEL 2010//VERSION 0.0//LAST MODIFIED: 4/17/10package com.glaiel.util.display {	import com.glaiel.util.math.Xform	import com.glaiel.util.math.Vec2D	import flash.display.DisplayObject		public class GCamera {				private var base:DisplayObject;		private var transform:Xform;		private var target:Xform;		private var ccenter:Vec2D;		private var tcenter:Vec2D;						public var easing:Number;				public function GCamera(b:DisplayObject) { 			base = b;			transform = new Xform();			target = new Xform();			easing = .1;			ccenter = new Vec2D(0, 0);			tcenter = new Vec2D(0, 0);		}						public function update(){			transform = transform.lerp(target, easing);			ccenter = ccenter.lerp(tcenter, easing);			var ttransform:Xform = transform.copy();									var cdir:Vec2D = ccenter.copy();			cdir.x *= transform.scaleX;			cdir.y *= transform.scaleY;			cdir.rotate(transform.rotation);						ttransform.x -= cdir.x;			ttransform.y -= cdir.y;						ttransform.x = int(ttransform.x/scaleX)*scaleX;			ttransform.y = int(ttransform.y/scaleY)*scaleY;						base.transform.matrix = ttransform.invmatrix;		}				public function get xform():Xform {return target;}		public function set xform(x:Xform){target = x.copy();}				public function get rotation():Number     {return target.rotation;}		public function set rotation(r:Number)    {target.rotation = r;}		public function get x():Number            {return target.x;}		public function set x(px:Number)          {target.x = px;}		public function get y():Number            {return target.y;}		public function set y(py:Number)          {target.y = py;}		public function get scaleX():Number       {return target.scaleX;}		public function set scaleX(sx:Number)     {target.scaleX = sx;}		public function get scaleY():Number       {return target.scaleY;}		public function set scaleY(sy:Number)     {target.scaleY = sy;}				public function get center():Vec2D {return tcenter;}		public function set center(c:Vec2D) {tcenter = c.copy();}				public function easeTo(x:Number, y:Number, rot:Number=0, scalex:Number=1, scaley:Number=1){			target.x = x;			target.y = y;			target.rotation = rotation;			target.scaleX = scalex;			target.scaleY = scaley;		}		public function jumpTo(x:Number, y:Number, rot:Number=0, scalex:Number=1, scaley:Number=1){			easeTo(x,y,rot,scalex,scaley);			jump();		}				public function jump(){			transform = target.copy();		}						}	}