package {	import flash.events.Event;	import flash.display.MovieClip;	public class EBomber extends Enemy{		private var timer:int = 0;				private var dir:Number;		private var tdir:Number;		private var orbit:Number;		public function EBomber (a:Attractable, b:Attractable){			super(a, b);			timer = Math.random()*200;			dir = 9;			tdir = 0;						orbit = Math.random()*350 + 450;			handle.rumble = 10;		}		public override function update(){			var dist:Vec2D = new Vec2D(base.x - handle.x, base.y-handle.y);			var dl:Number = dist.length;			dist.length -= orbit;						if(Math.random()<.005){				dir = Math.random()>.5?18:-18;			}			tdir += (dir-tdir)*.1;						if(dist.length > 10){				dist.norm();				handle.momentum.x += dist.x*9;				handle.momentum.y += dist.y*9;			} else {				var dist2:Vec2D = new Vec2D(base.x - handle.x, base.y-handle.y);				dist2.norm();				handle.momentum.x += -dist2.y*tdir;				handle.momentum.y += +dist2.x*tdir;			}						if(dl < orbit+100){				timer = (timer+1)%200;				var speed:Vec2D = new Vec2D(0, -1).rotated(handle.clip.rotation);				speed.length = 20;				if(timer==0){					SoundEffect.play(SoundEffect.FIRE);					ROOT.launchBomb(new Vec2D(handle.x+speed.x, handle.y+speed.y), speed);					MovieClip(handle.clip).play();				}			}			if(handle.held == 0) {				handle.stable = true;			}			if(!handle.stable && handle.momentum.length2 > 0){				handle.clip.rotation = Vec2D.angle2(new Vec2D(0, -1), handle.momentum);			} else {				handle.clip.rotation += Vec2D.angle2(new Vec2D(0, -1).rotated(handle.clip.rotation), new Vec2D(base.x - handle.x, base.y-handle.y)) * .1;			}		}	}}