package {	import flash.events.Event;	import flash.display.MovieClip;	import flash.geom.*;	public class EBoss3 extends Enemy{		private var stat:int;		private var dir:Vec2D;		private var timer:int;		private var breakTimer:int;		public function EBoss3 (a:Attractable, b:Attractable){			super(a, b);			stat = 0;			timer = 200;			dir = new Vec2D(10, 0);			handle.clip.rotation = Vec2D.angle2(new Vec2D(0, -1), handle.momentum);			breakTimer = 0;			handle.rumble = 150;		}		public override function update(){			var dist:Vec2D = new Vec2D(base.x - handle.x, base.y-handle.y);						dir.rotate(stat*10);						var dl:Number = dist.length;						if(dist.length < 250){				var dist2:Vec2D = new Vec2D(base.x - handle.x, base.y-handle.y);				dist2.norm();				handle.momentum.x -= dist2.x*50;				handle.momentum.y -= dist2.y*50;				if(dist.length < 200){					handle.momentum.x -= dist2.x*500;					handle.momentum.y -= dist2.y*500;				}			}						if(dist.length > 1000){				var dist2:Vec2D = new Vec2D(base.x - handle.x, base.y-handle.y);				dist2.norm();				handle.momentum.x += dist2.x*50;				handle.momentum.y += dist2.y*50;			}						if(Math.random() < .1 || stat == 0 || dist.length < 500){				if(Math.random()<.75 || dist.length < 500){					dist.length -= 500;					stat = Vec2D.angle2(dir, dist) > 0 ? 1 : -1;				} else {					if(Math.random() < .5){						stat = 1;					} else {						stat = -1;					}				}			}						if(handle.life > 8000){				handle.momentum.x += dir.x*7;				handle.momentum.y += dir.y*7;			} else {				handle.momentum.x += dir.x*10;				handle.momentum.y += dir.y*10;			}						handle.stable = true;						if(dl<900){				if(handle.life > 4000){					timer = (timer + 1)%500;					if(timer == 0 || timer == 25 || timer == 50 || timer == 75){						SoundEffect.play(SoundEffect.FIRE);						ROOT.launchBomb(new Vec2D(handle.x, handle.y), new Vec2D(0, 0));					}					if(timer == 200){						SoundEffect.play(SoundEffect.FIRE);						ROOT.launchZBomb(new Vec2D(handle.x, handle.y), new Vec2D(0, 0));					}				} else {					timer = (timer + 1)%350;					if(timer == 0 || timer == 50 || timer == 100 || timer == 150){						SoundEffect.play(SoundEffect.FIRE);						ROOT.launchBomb(new Vec2D(handle.x, handle.y), new Vec2D(0, 0));					}					if(timer == 25 || timer == 75 || timer == 125){						SoundEffect.play(SoundEffect.FIRE);						ROOT.launchZBomb(new Vec2D(handle.x, handle.y), new Vec2D(0, 0));					}				}			}						if(handle.held != 0) {				breakTimer++;			} else {				breakTimer = 0;			}			if(breakTimer >= 85){				MovieClip(handle.clip).force.play();			}			if(breakTimer >= 90){				handle.breakTethers();			}						handle.clip.rotation = Vec2D.angle2(new Vec2D(0, -1), handle.momentum);		}	}}